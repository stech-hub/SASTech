<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Sokpah AI â€“ BioNurse Pro Premium</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Styles -->
  <link rel="stylesheet" href="style.css" />

  <!-- Firebase Auth Guard -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCyAIL9Ki7OVqgq23LgAQhmFQzN8ZAMtGM",
      authDomain: "bionurse-pro.firebaseapp.com",
      projectId: "bionurse-pro",
      storageBucket: "bionurse-pro.firebasestorage.app",
      messagingSenderId: "262309708872",
      appId: "1:262309708872:web:b26529e0283a17aafc447d"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    onAuthStateChanged(auth, (user) => {
      if (!user) window.location.href = "/";
    });

    window.logout = async () => {
      await signOut(auth);
      window.location.href = "/";
    };
  </script>
</head>

<body class="pro-body">

  <!-- HEADER -->
  <header class="pro-header">
    <h1>ğŸ¤– Sokpah AI</h1>
    <p>BioNurse Pro â€“ Premium Intelligence Platform</p>
    <button onclick="logout()" class="logout-btn">Logout</button>
  </header>

  <!-- DASHBOARD -->
  <main class="dashboard">

    <!-- AI CHAT -->
    <section class="card ai-card">
      <h2>ğŸ’¬ Sokpah AI Assistant</h2>
      <div id="ai-chat-box"></div>
      <input id="ai-input" placeholder="Ask Sokpah AI anything..." />
      <button onclick="sendAI()">Send</button>
    </section>

    <!-- MOTIVATION -->
    <section class="card">
      <h2>ğŸ”¥ Motivation Engine</h2>
      <p id="quote">Loading inspiration...</p>
    </section>

    <!-- FEATURES -->
    <section class="card grid">
      <div>ğŸ“š Premium Nursing Notes</div>
      <div>ğŸ§  Smart AI Study Planner</div>
      <div>ğŸ“ Certificates & Courses</div>
      <div>ğŸ’¼ Project Building Support</div>
      <div>ğŸŒ Global Scholarships</div>
      <div>âš™ï¸ Custom App / Website Builds</div>
    </section>

    <!-- DONATION -->
    <section class="card donate">
      <h2>â¤ï¸ Support Development</h2>
      <p>
        Bank: <b>United Bank of Africa (Liberia)</b><br />
        Account: <b>53020710015394</b><br />
        Name: <b>Akin S. Sokpah</b>
      </p>
      <p>
        Mobile Money: <b>0889183557</b>
      </p>
      <p class="warn">
        ğŸ“¸ Send payment screenshot on WhatsApp to start your project.
      </p>
      <a href="https://wa.me/231889183557" class="whatsapp">Message on WhatsApp</a>
    </section>

  </main>

  <!-- BEEP DONATION REMINDER -->
  <audio id="beep" src="https://assets.mixkit.co/sfx/preview/mixkit-alert-quick-chime-766.mp3"></audio>

  <script>
    // Donation reminder every 3 minutes
    setInterval(() => {
      document.getElementById("beep").play();
      alert("â¤ï¸ Support Sokpah AI to keep building powerful tools for you.");
    }, 180000);
  </script>

  <!-- AI FRONTEND LOGIC -->
  <script>
    async function sendAI() {
      const input = document.getElementById("ai-input");
      const box = document.getElementById("ai-chat-box");

      if (!input.value) return;

      box.innerHTML += `<div class="user">You: ${input.value}</div>`;

      try {
        const res = await fetch("/api/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message: input.value })
        });

        const data = await res.json();
        box.innerHTML += `<div class="ai">Sokpah AI: ${data.reply}</div>`;
      } catch {
        box.innerHTML += `<div class="ai error">AI temporarily unavailable.</div>`;
      }

      input.value = "";
      box.scrollTop = box.scrollHeight;
    }
  </script>

  <!-- QUOTES -->
  <script src="quotes.js"></script>

</body>
</html>
